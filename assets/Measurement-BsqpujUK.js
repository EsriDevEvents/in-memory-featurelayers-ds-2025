const __vite__fileDeps=["./AreaMeasurement2D-bOevYR5R.js","./index-Dv-JqQDv.js","./index-CejX7rzk.css","./jsxFactory-C3RLkrq9.js","./defaultUnit-DR4mV0yv.js","./getDefaultUnitForView-CsWpEOAw.js","./unitFormatUtils-D-q5OaJY.js","./ByteSizeUnit-BsxeN7wM.js","./Cyclical-L5YKfO29.js","./quantityUtils-CvTt11a2.js","./UpdatingHandles-C0Kh7aEt.js","./geometryEngine-C5uHQPwZ.js","./geometryEngineBase-RmbNeFm7.js","./_commonjsHelpers-DCkdB7M8.js","./hydrated-iwj77qVb.js","./geodesicUtils-C4H45CeC.js","./GraphicsLayer-D1PdSLqE.js","./GraphicsCollection-DlcRCtU0.js","./ViewingMode-Dodu7ZZk.js","./SnappingVisualizer2D-WoQuRNq-.js","./vec2-DGogPjh1.js","./vec2f64-Diu2Kaa8.js","./enums-BRXbslMp.js","./SnappingManager-BxBCA2Ex.js","./elevationInfoUtils-Cey9W7Lb.js","./projectVectorToVector-BbXjU1Ty.js","./projectPointToVector-ARkh6gdu.js","./plane-4BN6ZBDV.js","./mat3f64-BBpwCtoL.js","./mat4f64-Dk4dwAN8.js","./quatf64-BrpT0VRp.js","./mathUtils-urfecwwD.js","./sphere-j1PWtIhy.js","./geometry2dUtils-BOZAHPKg.js","./floorFilterUtils-DZ5C6FQv.js","./InputManager-BwD1PEf3.js","./signal-0tlktF45.js","./keybindings-DX6sI0di.js","./utils-CXgSw6Sd.js","./layerViewUtils-D2JqIDZ8.js","./geodesicLengthMeasurementUtils-BLtZnsPD.js","./SnappingVisualizer-be9i9okW.js","./PointSnappingHint-EBEIOVE5.js","./Draw-DVYrNR5V.js","./EditGeometryOperations-B2SzBwZq.js","./SnappingContext-lR2hMWGP.js","./SnappingOperation-D2VtofMm.js","./Scheduler-KZBBWfDI.js","./debugFlags-CVnXAL57.js","./screenUtils-DKZWDFXK.js","./surfaceCoordinateSystems-Djy4b_d8.js","./memoize-DsJmrG76.js","./ReactiveSet-DhWxTTYq.js","./dehydratedFeatureComparison-JrNDQOYF.js","./InteractiveToolBase-ClRFM-nV.js","./meshVertexSpaceUtils-1Rv9Wig9.js","./MeshLocalVertexSpace-Bf4xmfpu.js","./hydratedFeatures-D9SfIMrp.js","./interfaces-D6pIddIh.js","./SketchLabelOptions-DrqnZvLd.js","./SnappingDragPipelineStep-B5YcZAo8.js","./mat2d-C6u6dH6d.js","./mat2df64-CBKYtunK.js","./quat-B52zwwOM.js","./GraphicManipulator-BDvk10oi.js","./drapedUtils-nWPHxHp9.js","./SnappingManagerPool-Bm5IY62Y.js","./MeasurementWidgetContent-BpWV4MlP.js","./UnitSelect-C-nWBhb5.js","./globalCss-CZa70j6i.js","./AreaMeasurement3D-CMSC1md7.js","./Analysis-B5cU-qRz.js","./measurementUtils-Y2csc6NI.js","./geodesicAreaMeasurementUtils-CmEBSq_6.js","./SnappingVisualizer3D-Cz0TFK1Y.js","./ExtendedLineVisualElement-B0T34MD8.js","./vec4f32-CjrfB-0a.js","./frustum-W7EQ25hI.js","./lineSegment-C_r0Slta.js","./EngineVisualElement-DfSprzSD.js","./RenderGeometry-D3-u-2b6.js","./vec3f32-Cw9Q6TO_.js","./DoubleArray-DzYWDmvK.js","./DefaultTechniqueConfiguration-C28-5KBi.js","./Indices-BTetzIKW.js","./basicInterfaces-wONHx_SN.js","./Util-CQaYQWOS.js","./debugFlags-CfrzpJ7g.js","./interfaces-B8ge7Jg9.js","./VertexAttribute-BnAa5VW0.js","./triangle-0a93pGd5.js","./doublePrecisionUtils-B0owpBza.js","./requestImageUtils-CO_Ks2k6.js","./enums-BlUEVwJR.js","./Texture-BsiXXqc8.js","./renderState-yUi34s5A.js","./Matrix4PassUniform-B-NXMru_.js","./BindType-BmZEZMMh.js","./mat3-B7LiNcRs.js","./ShaderTechniqueConfiguration-D3UbJ2mX.js","./orientedBoundingBox-BiAE_4Zn.js","./spatialReferenceEllipsoidUtils-MFgRhPLs.js","./computeTranslationToOriginAndRotation-DBznw1xD.js","./ElevationProvider-DZcTQ1wD.js","./boundedPlane-DBcMJiAN.js","./verticalOffsetUtils-DVynISE7.js","./axisAngleDegrees-CRhw0Lf9.js","./weather-K8rA5AE9.js","./Float4DrawUniform-DDO6IFxX.js","./NestedMap-DgiGbX8E.js","./Octree-BaSixQu1.js","./InterleavedLayout-B5L5JJLV.js","./BufferView-_0HdWB6j.js","./types-D0PSWh4d.js","./floatRGBA-BTfDfCN4.js","./Intersector-BLO31d1u.js","./glUtil-C6KhMg1m.js","./VertexElementDescriptor-BOD-G50G.js","./VertexArrayObject-Czm05pt7.js","./BufferObject-Dhco7AlX.js","./VisualElement-C7QPSfUA.js","./Laserlines.glsl-Dxbyjke2.js","./PointVisualElement-FxfC2DLT.js","./Object3DVisualElement-DmJ-xKcL.js","./ColorMaterial.glsl-D5JrE5f2.js","./OutputHighlight.glsl-Bs_35Qno.js","./RightAngleQuadVisualElement-2kSwmXLY.js","./dragEventPipeline3D-BLMXasJE.js","./ray-DhyD5gIv.js","./RenderObject-DDR5Ef_H.js","./ToolIntersector-DcwgWUrA.js","./ShadedColorMaterial.glsl-xZWGq-4Z.js","./InteractiveAnalysisViewModel-CCqyCUTR.js","./DistanceMeasurement2D-DM8UinkS.js","./DirectLineMeasurement3D-oNT64mKt.js","./interfaces-js1RL7O8.js","./interfaces-CjSZqm0S.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{j as e,y as i,lV as g,lW as h,P as c,b_ as w,o as u,g9 as p,_ as d}from"./index-Dv-JqQDv.js";import{e as _,B as m,n as y}from"./jsxFactory-C3RLkrq9.js";import{e as M}from"./defaultUnit-DR4mV0yv.js";import"./getDefaultUnitForView-CsWpEOAw.js";let o=class extends w{constructor(t){super(t),this.activeTool=null,this.activeViewModel=null,this.view=null}get areaUnit(){return this.defaultUnit}set areaUnit(t){this._overrideIfSome("areaUnit",t)}get linearUnit(){return this.defaultUnit}set linearUnit(t){this._overrideIfSome("linearUnit",t)}get state(){const{activeViewModel:t}=this;return t?t.state:"disabled"}};e([i({type:["area","distance","direct-line"]})],o.prototype,"activeTool",void 0),e([i()],o.prototype,"activeViewModel",void 0),e([i({type:g})],o.prototype,"areaUnit",null),e([i(M)],o.prototype,"defaultUnit",void 0),e([i({type:h})],o.prototype,"linearUnit",null),e([i({readOnly:!0})],o.prototype,"state",null),e([i()],o.prototype,"view",void 0),o=e([c("esri.widgets.Measurement.MeasurementViewModel")],o);const v=o,U={base:"esri-measurement"};function f(t){return(t==null?void 0:t.declaredClass)==="esri.widgets.AreaMeasurement2D"||(t==null?void 0:t.declaredClass)==="esri.widgets.AreaMeasurement3D"}let a=class extends m{constructor(t,s){super(t,s),this._widgets=new Map,this.activeWidget=null,this.messages=null,this.viewModel=new v}initialize(){this.activeWidget&&this.viewModel.set("activeViewModel",this.activeWidget.viewModel),this.view&&this.activeTool&&this._getActiveWidget().then(t=>{this._set("activeWidget",t)}),this.addHandles([u(()=>[this.view,this.activeTool],async()=>{this._set("activeWidget",await this._getActiveWidget())}),u(()=>this.activeWidget,(t,s)=>{this.viewModel.set("activeViewModel",t?t.viewModel:null),s&&(s.visible=!1)}),u(()=>[this.areaUnit,this.linearUnit,this.uiStrings],()=>this._updateSubWidgetProperties())])}destroy(){this._destroyWidgets()}get activeTool(){return this.viewModel.activeTool}set activeTool(t){this.viewModel.activeTool=t}get areaUnit(){return this.viewModel.areaUnit}set areaUnit(t){this.viewModel.areaUnit=t}get icon(){return"measure"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get linearUnit(){return this.viewModel.linearUnit}set linearUnit(t){this.viewModel.linearUnit=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{activeWidget:t}=this,s=t&&!t.destroyed?t.render():null;return y("div",{class:U.base},s)}clear(){this.activeTool=null,this._destroyWidgets()}startMeasurement(){const{activeViewModel:t}=this.viewModel;t&&p(t.start())}async _createWidget(t){const{areaUnit:s,linearUnit:r,view:n}=this;if(!n)return null;switch(t){case"area":{const{type:l}=n;switch(l){case"2d":return new(await d(()=>import("./AreaMeasurement2D-bOevYR5R.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69]),import.meta.url)).default({view:n,unit:s,uiStrings:this._createUIStringsForWidget(t)});case"3d":return new(await d(()=>import("./AreaMeasurement3D-CMSC1md7.js"),__vite__mapDeps([70,1,2,3,71,4,5,51,10,57,25,26,72,32,27,28,29,30,21,31,73,9,11,12,13,14,15,40,20,24,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,18,90,91,92,93,94,95,96,97,98,99,100,63,101,102,103,104,105,106,107,47,36,48,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,23,33,34,35,37,38,39,8,41,42,127,128,54,55,56,44,58,129,130,131,45,60,53,66,46,49,132,67,68,69]),import.meta.url)).default({view:n,unit:s,uiStrings:this._createUIStringsForWidget(t)});default:return null}}case"distance":{const{type:l}=n;return l==="2d"?new(await d(()=>import("./DistanceMeasurement2D-DM8UinkS.js"),__vite__mapDeps([133,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69]),import.meta.url)).default({view:n,unit:r,uiStrings:this._createUIStringsForWidget(t)}):null}case"direct-line":{const{type:l}=n;return l==="3d"?new(await d(()=>import("./DirectLineMeasurement3D-oNT64mKt.js"),__vite__mapDeps([134,1,2,3,71,4,5,51,10,57,25,26,72,32,27,28,29,30,21,31,73,9,11,12,13,14,15,40,20,24,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,18,90,91,92,93,94,95,96,97,98,99,100,63,101,102,103,104,105,106,107,47,36,48,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,23,33,34,35,37,38,39,8,41,42,127,128,54,55,56,44,58,135,136,129,131,45,60,53,66,49,132,67,68,69]),import.meta.url)).default({view:n,unit:r,uiStrings:this._createUIStringsForWidget(t)}):null}default:return null}}_destroyWidgets(){this._widgets.forEach(t=>t.destroy()),this._widgets.clear()}async _getActiveWidget(){const{activeTool:t,view:s}=this;if(!s||!t)return null;let r=null;if(this._widgets.has(t))r=this._widgets.get(t),r.visible=!0;else{if(r=await this._createWidget(t),!r)return null;await r.viewModel.start(),this._widgets.set(t,r)}return r}_createUIStringsForWidget(t){var r;if(!this.uiStrings)return;const s=t+"-"+((r=this.view)==null?void 0:r.type);return this.uiStrings[s]}_updateSubWidgetProperties(){this._widgets.forEach((t,s)=>{const{areaUnit:r,linearUnit:n}=this;t.unit=f(t)?r:n,t.uiStrings=this._createUIStringsForWidget(s)})}};e([i()],a.prototype,"activeTool",null),e([i({readOnly:!0})],a.prototype,"activeWidget",void 0),e([i()],a.prototype,"areaUnit",null),e([i()],a.prototype,"icon",null),e([i()],a.prototype,"label",null),e([i()],a.prototype,"linearUnit",null),e([i(),_("esri/widgets/Measurement/t9n/Measurement")],a.prototype,"messages",void 0),e([i()],a.prototype,"uiStrings",void 0),e([i()],a.prototype,"view",null),e([i({type:v})],a.prototype,"viewModel",void 0),a=e([c("esri.widgets.Measurement")],a);const b=a;export{b as default};
