import{j as n,y as o,P as c,o as m,D as u}from"./index-Dv-JqQDv.js";import{B as b,n as y}from"./jsxFactory-C3RLkrq9.js";import{l as M}from"./AnchorElementViewModel-C0T6vNtn.js";let l=class extends M{constructor(i){super(i),this.visible=!1}};n([o()],l.prototype,"visible",void 0),l=n([c("esri.widgets.Spinner.SpinnerViewModel")],l);const v=l,a="esri-spinner",h={base:a,spinnerStart:`${a}--start`,spinnerFinish:`${a}--finish`};let s=class extends b{constructor(i,e){super(i,e),this._animationDelay=500,this._animationPromise=null,this.viewModel=new v}initialize(){this.addHandles(m(()=>this.visible,i=>this._visibleChange(i)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(i){this.viewModel.location=i}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}get visible(){return this.viewModel.visible}set visible(i){this.viewModel.visible=i}show(i){const{location:e,promise:t}=i??{};e&&(this.viewModel.location=e),this.visible=!0;const r=()=>this.hide();t&&t.catch(()=>{}).then(r)}hide(){this.visible=!1}render(){const{visible:i}=this,{screenLocation:e}=this.viewModel,t=!!e,r=i&&t,d=!i&&t,p={[h.spinnerStart]:r,[h.spinnerFinish]:d},w=this._getPositionStyles();return y("div",{class:this.classes(h.base,p),styles:w})}_visibleChange(i){if(i)return void(this.viewModel.screenLocationEnabled=!0);const e=u(this._animationDelay);this._animationPromise=e,e.catch(()=>{}).then(()=>{this._animationPromise===e&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:i,view:e}=this.viewModel;if(e==null||i==null)return{};const{padding:t}=e;return{left:i.x-t.left+"px",top:i.y-t.top+"px"}}};n([o()],s.prototype,"location",null),n([o()],s.prototype,"view",null),n([o({type:v})],s.prototype,"viewModel",void 0),n([o()],s.prototype,"visible",null),s=n([c("esri.widgets.Spinner")],s);const P=s;export{P as h,v as p};
