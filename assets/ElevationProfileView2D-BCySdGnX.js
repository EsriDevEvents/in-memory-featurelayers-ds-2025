import{g8 as n,d6 as a,cD as l,X as d,m1 as g,o as h,ev as s,hM as m}from"./index-Dv-JqQDv.js";import{t as u}from"./ElevationProfile-CrCq1vB9.js";import{a as _}from"./HoveredPoints-z9hw_vKi.js";import{n as v}from"./layerViewUtils-D2JqIDZ8.js";import"./memoize-DsJmrG76.js";import"./jsxFactory-C3RLkrq9.js";import"./ByteSizeUnit-BsxeN7wM.js";import"./ElevationQueryTileCache-BJ_8u3U9.js";import"./projectVectorToVector-BbXjU1Ty.js";import"./projectPointToVector-ARkh6gdu.js";import"./LayerConstants-B33OP6sh.js";import"./debugFlags-CfrzpJ7g.js";import"./interfaces-B8ge7Jg9.js";import"./basicInterfaces-wONHx_SN.js";import"./VertexAttribute-BnAa5VW0.js";import"./ViewingMode-Dodu7ZZk.js";import"./ElevationProvider-DZcTQ1wD.js";import"./mat4f64-Dk4dwAN8.js";import"./sphere-j1PWtIhy.js";import"./plane-4BN6ZBDV.js";import"./mat3f64-BBpwCtoL.js";import"./quatf64-BrpT0VRp.js";import"./vec2f64-Diu2Kaa8.js";import"./mathUtils-urfecwwD.js";import"./boundedPlane-DBcMJiAN.js";import"./lineSegment-C_r0Slta.js";import"./verticalOffsetUtils-DVynISE7.js";import"./mat3-B7LiNcRs.js";import"./orientedBoundingBox-BiAE_4Zn.js";import"./quat-B52zwwOM.js";import"./spatialReferenceEllipsoidUtils-MFgRhPLs.js";import"./computeTranslationToOriginAndRotation-DBznw1xD.js";import"./Intersector-BLO31d1u.js";import"./Intersector-TO0eVp6c.js";import"./defaultUnit-DR4mV0yv.js";import"./getDefaultUnitForView-CsWpEOAw.js";import"./throttle-jjSnxk80.js";import"./elevationInfoUtils-Cey9W7Lb.js";import"./vec2-DGogPjh1.js";import"./geodesicUtils-C4H45CeC.js";import"./QueueProcessor-DHxW4yaI.js";import"./ReactiveMap-DxvIcNmk.js";import"./signal-0tlktF45.js";import"./Scheduler-KZBBWfDI.js";import"./debugFlags-CVnXAL57.js";import"./traversalUtils-DmE6QkgJ.js";import"./Ground-DpNOewuO.js";import"./ElevationQuery-DdsadaEp.js";import"./ElevationSamplerData-CTsi29Ag.js";import"./ElevationTile-z5FKMbqq.js";import"./TileKey-DZd6gJy7.js";import"./GraphicsLayer-D1PdSLqE.js";import"./GraphicsCollection-DlcRCtU0.js";import"./InputManager-BwD1PEf3.js";import"./SketchViewModel-RO1Mu5ze.js";import"./isSupportedObject-CXGhKfYW.js";import"./SketchLabelOptions-DrqnZvLd.js";import"./SnappingManager-BxBCA2Ex.js";import"./UpdatingHandles-C0Kh7aEt.js";import"./geometry2dUtils-BOZAHPKg.js";import"./floorFilterUtils-DZ5C6FQv.js";import"./keybindings-DX6sI0di.js";import"./utils-CXgSw6Sd.js";import"./geodesicLengthMeasurementUtils-BLtZnsPD.js";import"./quantityUtils-CvTt11a2.js";import"./geometryEngine-C5uHQPwZ.js";import"./geometryEngineBase-RmbNeFm7.js";import"./_commonjsHelpers-DCkdB7M8.js";import"./hydrated-iwj77qVb.js";import"./Cyclical-L5YKfO29.js";import"./layerUtils-BS1Di3Pm.js";import"./hitTestSelectUtils-UXJPjatw.js";import"./screenUtils-DKZWDFXK.js";import"./unitFormatUtils-D-q5OaJY.js";import"./substitute-BVUBXY1A.js";import"./UnitSelect-C-nWBhb5.js";import"./globalCss-CZa70j6i.js";import"./AnchorElementViewModel-C0T6vNtn.js";class c{constructor(t){this._params=t,this._highlightTask=null,this._highlightHandle=null}destroy(){this.remove()}remove(){this._highlightTask=n(this._highlightTask),this._highlightHandle=a(this._highlightHandle)}update(t){if(this.remove(),t==null||!w(t))return;const o=t.layer;this._highlightTask=l(async i=>{const p=await this._params.view.whenLayerView(o);d(i);const e=v(p)?p:null;e&&(this._highlightHandle=e.highlight(t))})}}function w(r){return r.geometry!=null&&r.geometry.type==="polyline"}class Ft{constructor(t,o){this._handles=new g,this._inputRepresentation=new c({view:t}),this._hoveredPoints=new _({view:t}),this._handles.add([h(()=>o.viewModel.hoveredPoints,i=>this._hoveredPoints.update(i),s),h(()=>{const{state:i,highlightEnabled:p,viewModel:e}=o;return{input:e.input,state:i,highlightEnabled:p}},i=>this._updateInputRepresentation(i),s)])}destroy(){this._handles=m(this._handles),this._inputRepresentation=m(this._inputRepresentation),this._hoveredPoints=m(this._hoveredPoints)}_updateInputRepresentation({input:t,state:o,highlightEnabled:i}){o===u.Selected&&i?this._inputRepresentation.update(t):this._inputRepresentation.remove()}}export{Ft as ElevationProfileView2D};
