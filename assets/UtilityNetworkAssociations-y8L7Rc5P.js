const __vite__fileDeps=["./calcite-dropdown-DRynOMEV.js","./index-Dv-JqQDv.js","./index-CejX7rzk.css","./calcite-input-CtgYYKjm.js","./calcite-input-number-BzI84HM0.js","./input-number-B1MYOp-q.js","./calcite-label-BkItGIEA.js","./calcite-switch-B28276bg.js","./calcite-action-DegZGoaK.js","./calcite-block-section-BSdUQQWh.js","./calcite-icon-D3-fBgCQ.js","./calcite-panel-Bw3jBXML.js","./calcite-slider-BWw0aoCf.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{j as s,y as o,P as L,b_ as $,el as k,_ as A,db as U,dY as M,op as b,ar as B,o as g,G as I,s as N,lS as H,a6 as T,lT as W}from"./index-Dv-JqQDv.js";import{e as f,B as G,n as e,r as D}from"./jsxFactory-C3RLkrq9.js";import{h as F}from"./UpdatingHandles-C0Kh7aEt.js";import z from"./GraphicsLayer-D1PdSLqE.js";import{e as P}from"./layerUtils-BS1Di3Pm.js";import"./GraphicsCollection-DlcRCtU0.js";let _=class extends ${constructor(t){super(t),this.arrowsToggle=!1,this.capSelect=!1,this.colorPicker=!0,this.stylePicker=!0,this.widthInput=!0}};s([o({type:Boolean,nonNullable:!0})],_.prototype,"arrowsToggle",void 0),s([o({type:Boolean,nonNullable:!0})],_.prototype,"capSelect",void 0),s([o({type:Boolean,nonNullable:!0})],_.prototype,"colorPicker",void 0),s([o({type:Boolean,nonNullable:!0})],_.prototype,"stylePicker",void 0),s([o({type:Boolean,nonNullable:!0})],_.prototype,"widthInput",void 0),_=s([L("esri.widgets.UtilityNetworkAssociations.VisibleElementsSettingsPane")],_);const E=_,y="esri-un-associations",v={divControlsSymbolPicker:`${y}__div-controls-symbol-picker`,dropdown:`${y}__dropdown`,dropdownItemLineCap:`${y}__dropdown-item-line-cap`,dropdownItemLinePattern:`${y}__dropdown-item-line-pattern`,dropdownSelectedItemLineCap:`${y}__dropdown-selected-item-line-cap`,dropdownSelectedItemLinePattern:`${y}__dropdown-selected-item-line-pattern`,dropdownTrigger:`${y}__dropdown-trigger`,labelAndToggle:`${y}__label-and-toggle`};let S=class extends G{constructor(i,n){super(i,n),this._lineCapTypes=["butt","round","square"],this._lineStyleTypes=["solid","dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","short-dash","short-dash-dot","short-dash-dot-dot","short-dot"],this.lineSymbol=new k,this.messages=null,this.showArrows=!1,this.visibleElements=new E,this._afterComponentCreate=this._afterComponentCreate.bind(this)}render(){const{messages:{input:{lineCap:i,lineColor:n,lineStyle:r,lineWidth:l,showArrows:a}},visibleElements:d}=this,m=this.lineSymbol;return e("div",{class:v.divControlsSymbolPicker},d.arrowsToggle?this._renderToggle(a,this.showArrows,m,"marker"):void 0,d.capSelect?this._renderLineStylePicker(i,this._lineCapTypes,m,"cap"):void 0,d.colorPicker&&m.color?this._renderColorPicker(n,m.color.toHex(),m,"color"):void 0,d.stylePicker?this._renderLineStylePicker(r,this._lineStyleTypes,m,"style"):void 0,d.widthInput?this._renderNumberInput(l,m.width.toString(),m,"width"):void 0)}loadDependencies(){return D({dropdown:()=>A(()=>import("./calcite-dropdown-DRynOMEV.js"),__vite__mapDeps([0,1,2]),import.meta.url),"dropdown-group":()=>A(()=>import("./index-Dv-JqQDv.js").then(i=>i.vI),__vite__mapDeps([1,2]),import.meta.url),"dropdown-item":()=>A(()=>import("./index-Dv-JqQDv.js").then(i=>i.vH),__vite__mapDeps([1,2]),import.meta.url),input:()=>A(()=>import("./calcite-input-CtgYYKjm.js"),__vite__mapDeps([3,1,2]),import.meta.url),"input-number":()=>A(()=>import("./calcite-input-number-BzI84HM0.js"),__vite__mapDeps([4,5,1,2]),import.meta.url),label:()=>A(()=>import("./calcite-label-BkItGIEA.js"),__vite__mapDeps([6,1,2]),import.meta.url),switch:()=>A(()=>import("./calcite-switch-B28276bg.js"),__vite__mapDeps([7,1,2]),import.meta.url)})}_afterComponentCreate(i){"value"in i&&i.value!=null&&"setNumberValue"in i&&i.setNumberValue({committing:!1,value:i.value,origin:"direct"})}_renderColorPicker(i,n,r,l){return e("calcite-label",{scale:"s"},i,e("calcite-input",{scale:"s",type:"color",value:n,onCalciteInputInput:a=>{const d=a.target;r.set(l,new U(d.value))}}))}_renderLineStylePicker(i,n,r,l){const a=l==="style",d="esri/widgets/UtilityNetworkAssociations/assets/img";function m(w,x){return e("calcite-dropdown-item",{label:w,selected:r[x]===w},e("div",{class:a?v.dropdownItemLinePattern:v.dropdownItemLineCap,style:`background-image:url(${M(`${d}/line-${a?"patterns":"caps"}/${w}.png`)})`}))}return e("calcite-label",{scale:"s"},i,e("calcite-dropdown",{class:v.dropdown,onCalciteDropdownSelect:w=>{const x=w.target;r.set(l,x.selectedItems[0].label)}},e("div",{class:v.dropdownTrigger,role:"button",slot:"trigger"},e("div",{class:a?v.dropdownSelectedItemLinePattern:v.dropdownSelectedItemLineCap,style:`background-image:url(${M(`${d}/line-${a?"patterns":"caps"}/${r[l]}.png`)})`})),e("calcite-dropdown-group",null,n.map(w=>m(w,l)))))}_renderNumberInput(i,n,r,l){return e("calcite-label",{scale:"s"},i,e("calcite-input-number",{afterCreate:this._afterComponentCreate,max:10,min:1,scale:"s",step:1,type:"number",value:n,onCalciteInputNumberChange:a=>{const d=a.target;r.set(l,d.value)}}))}_renderToggle(i,n,r,l){return e("div",{class:v.labelAndToggle},e("calcite-label",{scale:"s"},i),e("calcite-switch",{bind:this,checked:n,onCalciteSwitchChange:a=>{a.target.checked?r.set(l,new b({style:"arrow"})):r.set(l,null)}}))}};s([o()],S.prototype,"lineSymbol",void 0),s([o(),f("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],S.prototype,"messages",void 0),s([o()],S.prototype,"showArrows",void 0),s([o({type:E,nonNullable:!0})],S.prototype,"visibleElements",void 0),S=s([L("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsLineSymbolPicker")],S);const R=S;let u=class extends ${constructor(t){super(t),this._internalGraphicsLayerConnectivity=this._createInternalGraphicsLayer("Connectivity Associations (Internal)"),this._internalGraphicsLayerStructuralAttachment=this._createInternalGraphicsLayer("Structural Attachment Associations (Internal)"),this._initialValidationsFinished=!1,this._updatingHandles=new F,this.autoRefreshAssociations=!1,this.connectivityAssociationsLineSymbol=new k({style:"short-dash",width:2,color:[190,159,159,1]}),this.executionError="",this.loadErrors=new B,this.maxAllowableAssociations=250,this.showAssociationsEnabled=!1,this.showArrowsConnectivity=!1,this.showArrowsStructuralAttachment=!1,this.structuralAttachmentAssociationsLineSymbol=new k({style:"short-dash",width:2,color:[159,190,159,1]})}initialize(){const t=async()=>{this.messages||(this.messages=await W("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations"))};t().then(()=>{this.view||(this.view=null),this.utilityNetwork||(this.utilityNetwork=null),this.addHandles([g(()=>[this.view,this.utilityNetwork],async()=>{var d,m;const{loadErrors:i,messages:{info:{noUtilityNetwork:n,noView:r}}}=this;this._initialValidationsFinished=!1,i.removeAll();let l=!1,a=!1;this.removeAssociations(),((d=this.utilityNetwork)==null?void 0:d.type)!=="utility"?(this.loadErrors.push(n),I.getLogger(this).error(new N("utilityNetworkAssociations:missing-property",n))):(this.utilityNetwork.loaded||await this.utilityNetwork.load(),l=!0),((m=this.view)==null?void 0:m.type)!=="2d"?(this.loadErrors.push(r),I.getLogger(this).error(new N("utilityNetworkAssociations:missing-property",r))):(P(this.view,this._internalGraphicsLayerConnectivity),P(this.view,this._internalGraphicsLayerStructuralAttachment),a=!0),l&&a&&this.showAssociationsEnabled&&await this.showAssociations(),this._internalGraphicsLayerConnectivity.visible=this.includeConnectivityAssociations,this._internalGraphicsLayerStructuralAttachment.visible=this.includeStructuralAttachmentAssociations,this._initialValidationsFinished=!0},{initial:!0}),g(()=>{var i;return[(i=this.view)==null?void 0:i.stationary,this.showAssociationsEnabled,this.maxAllowableAssociations]},async()=>{var i;(i=this.view)!=null&&i.stationary&&this.showAssociationsEnabled&&(this.includeConnectivityAssociations||this.includeStructuralAttachmentAssociations)&&await this.showAssociations()}),g(()=>[this.showArrowsConnectivity],()=>{const i=this.connectivityAssociationsLineSymbol.clone();i.marker=null,this.showArrowsConnectivity&&(i.marker=new b({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const n of this._internalGraphicsLayerConnectivity.graphics)n.symbol=i}),g(()=>[this.showArrowsStructuralAttachment],()=>{const i=this.structuralAttachmentAssociationsLineSymbol.clone();i.marker=null,this.showArrowsStructuralAttachment&&(i.marker=new b({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const n of this._internalGraphicsLayerStructuralAttachment.graphics)n.symbol=i}),g(()=>{const{cap:i,color:n,style:r,width:l,marker:a}=this.connectivityAssociationsLineSymbol;return[i,n,r,l,a]},()=>{const i=this.connectivityAssociationsLineSymbol.clone();for(const n of this._internalGraphicsLayerConnectivity.graphics)n.symbol=i;this.showArrowsConnectivity=!1,i.marker=null,this.connectivityAssociationsLineSymbol.marker&&(this.showArrowsConnectivity=!0,i.marker=new b({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}))}),g(()=>{const{cap:i,color:n,style:r,width:l,marker:a}=this.structuralAttachmentAssociationsLineSymbol;return[i,n,r,l,a]},()=>{const i=this.structuralAttachmentAssociationsLineSymbol.clone();for(const n of this._internalGraphicsLayerStructuralAttachment.graphics)n.symbol=i;this.showArrowsStructuralAttachment=!1,i.marker=null,this.structuralAttachmentAssociationsLineSymbol.marker&&(this.showArrowsStructuralAttachment=!0,i.marker=new b({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}))}),H(t)])})}destroy(){this._updatingHandles.destroy(),this.view=null,this._removeInternalGraphicsLayers()}set includeConnectivityAssociations(t){this._set("includeConnectivityAssociations",t),this._internalGraphicsLayerConnectivity.visible=t}set includeStructuralAttachmentAssociations(t){this._set("includeStructuralAttachmentAssociations",t),this._internalGraphicsLayerStructuralAttachment.visible=t}get state(){return this.loadErrors.length?"disabled":this._updatingHandles.updating?"executing":this.executionError!==""?"warning":this._initialValidationsFinished?"ready":"loading"}set utilityNetwork(t){this._get("utilityNetwork")!==t&&this._set("utilityNetwork",t)}set view(t){this._get("view")!==t&&this._set("view",t)}removeAssociations(){this._internalGraphicsLayerConnectivity.removeAll(),this._internalGraphicsLayerStructuralAttachment.removeAll()}async showAssociations(){var r,l;const{messages:{info:{maxAllowableAssociationsExceeded:t,noAssociationsFound:i}},utilityNetwork:n}=this;this._set("executionError",""),this._updatingHandles.addPromise(n==null?void 0:n.synthesizeAssociationGeometries({returnConnectivityAssociations:this.includeConnectivityAssociations,returnAttachmentAssociations:this.includeStructuralAttachmentAssociations,extent:(r=this.view)==null?void 0:r.extent,outSpatialReference:(l=this.utilityNetwork)==null?void 0:l.spatialReference.clone(),maxGeometryCount:this.maxAllowableAssociations}).then(a=>{let d=[],m=[];return a!=null&&a.maxGeometryCountExceeded?(this.removeAssociations(),void this._set("executionError",t)):(a==null?void 0:a.associations.length)===0?(this.removeAssociations(),void this._set("executionError",i)):void(a&&(d=a==null?void 0:a.associations.filter(({associationType:w})=>w==="connectivity").map(w=>(this.connectivityAssociationsLineSymbol.marker=null,this.showArrowsConnectivity&&(this.connectivityAssociationsLineSymbol.marker=new b({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new T({geometry:w.geometry.clone(),symbol:this.connectivityAssociationsLineSymbol}))),m=a.associations.filter(({associationType:w})=>w==="attachment").map(w=>(this.structuralAttachmentAssociationsLineSymbol.marker=null,this.showArrowsStructuralAttachment&&(this.structuralAttachmentAssociationsLineSymbol.marker=new b({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new T({geometry:w.geometry.clone(),symbol:this.structuralAttachmentAssociationsLineSymbol}))),this._internalGraphicsLayerConnectivity.removeAll(),d.length>0&&this._internalGraphicsLayerConnectivity.addMany(d),this._internalGraphicsLayerStructuralAttachment.removeAll(),m.length>0&&this._internalGraphicsLayerStructuralAttachment.addMany(m)))},({message:a})=>{this._set("executionError",a)}))}_createInternalGraphicsLayer(t){return new z({listMode:"hide",internal:!0,title:t})}_removeInternalGraphicsLayers(){var t;this._internalGraphicsLayerConnectivity&&this._internalGraphicsLayerStructuralAttachment&&((t=this.view)!=null&&t.map)&&(this.view.map.remove(this._internalGraphicsLayerConnectivity),this.view.map.remove(this._internalGraphicsLayerStructuralAttachment))}};s([o()],u.prototype,"_initialValidationsFinished",void 0),s([o()],u.prototype,"autoRefreshAssociations",void 0),s([o({type:k,nonNullable:!0})],u.prototype,"connectivityAssociationsLineSymbol",void 0),s([o({readOnly:!0})],u.prototype,"executionError",void 0),s([o({type:Boolean,value:!0})],u.prototype,"includeConnectivityAssociations",null),s([o({type:Boolean,value:!0})],u.prototype,"includeStructuralAttachmentAssociations",null),s([o()],u.prototype,"loadErrors",void 0),s([o()],u.prototype,"maxAllowableAssociations",void 0),s([o()],u.prototype,"messages",void 0),s([o()],u.prototype,"showAssociationsEnabled",void 0),s([o()],u.prototype,"showArrowsConnectivity",void 0),s([o()],u.prototype,"showArrowsStructuralAttachment",void 0),s([o({readOnly:!0})],u.prototype,"state",null),s([o({type:k,nonNullable:!0})],u.prototype,"structuralAttachmentAssociationsLineSymbol",void 0),s([o()],u.prototype,"utilityNetwork",null),s([o()],u.prototype,"view",null),u=s([L("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsViewModel")],u);const V=u;let C=class extends ${constructor(t){super(t),this.maxAllowableAssociationsSlider=!1,this.connectivityAssociationsSettings=null,this.structuralAttachmentAssociationsSettings=null}};s([o({type:Boolean,nonNullable:!0})],C.prototype,"maxAllowableAssociationsSlider",void 0),s([o({type:E,nonNullable:!0})],C.prototype,"connectivityAssociationsSettings",void 0),s([o({type:E,nonNullable:!0})],C.prototype,"structuralAttachmentAssociationsSettings",void 0),C=s([L("esri.widgets.UtilityNetworkAssociations.VisibleElements")],C);const O=C,p="esri-un-associations",h={action:`${p}__action`,actionRefresh:`${p}__action-refresh`,blockContent:`${p}__block-content`,blockSectionSettings:`${p}__block-section-settings`,divControlsMain:`${p}__div-controls-main`,label:`${p}__label`,labelAndSlider:`${p}__label-and-slider`,labelAndToggle:`${p}__label-and-toggle`,slider:`${p}__slider`,statusIconContainer:`${p}__status-icon-container`,statusIconWarning:`${p}__status-icon-warning`,switch:`${p}__switch`,switchContainer:`${p}__switch-container`,widgetContainer:`${p}__widget-container`};let c=class extends G{constructor(t,i){super(t,i),this._autoRefreshAssociations=!0,this._associationsOptionsEnabled=!1,this._maxAllowableAssociationsSliderMax=1e3,this._maxAllowableAssociationsSliderMin=250,this._maxAllowableAssociationsSliderStep=250,this.messages=null,this.messagesCommon=null,this.viewModel=new V,this.visibleElements=new O}initialize(){this.addHandles([g(()=>{var t;return[(t=this.view)==null?void 0:t.stationary,this.showAssociationsEnabled,this.includeConnectivityAssociations,this.includeStructuralAttachmentAssociations,this.maxAllowableAssociations]},()=>{this.autoRefreshAssociations===!0&&(this.showAssociationsEnabled===!0?this.viewModel.showAssociations():this.viewModel.removeAssociations())})])}get autoRefreshAssociations(){return this._autoRefreshAssociations}set autoRefreshAssociations(t){this._autoRefreshAssociations=t}get connectivityAssociationsLineSymbol(){return this.viewModel.connectivityAssociationsLineSymbol}set connectivityAssociationsLineSymbol(t){this.viewModel.connectivityAssociationsLineSymbol=t}get icon(){return"view-associations"}set icon(t){this._overrideIfSome("icon",t)}get includeConnectivityAssociations(){return this.viewModel.includeConnectivityAssociations}set includeConnectivityAssociations(t){this.viewModel.includeConnectivityAssociations=t}get includeStructuralAttachmentAssociations(){return this.viewModel.includeStructuralAttachmentAssociations}set includeStructuralAttachmentAssociations(t){this.viewModel.includeStructuralAttachmentAssociations=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get maxAllowableAssociations(){return this.viewModel.maxAllowableAssociations}set maxAllowableAssociations(t){this.viewModel.maxAllowableAssociations=t}get maxAllowableAssociationsSliderMax(){return this._maxAllowableAssociationsSliderMax}set maxAllowableAssociationsSliderMax(t){t<=this.maxAllowableAssociationsSliderMin||(this._maxAllowableAssociationsSliderMax=t)}get maxAllowableAssociationsSliderMin(){return this._maxAllowableAssociationsSliderMin}set maxAllowableAssociationsSliderMin(t){t<0||t>=this.maxAllowableAssociationsSliderMax||(this._maxAllowableAssociationsSliderMin=t)}get maxAllowableAssociationsSliderStep(){return this._maxAllowableAssociationsSliderStep}set maxAllowableAssociationsSliderStep(t){this._maxAllowableAssociationsSliderStep=t}get showArrowsConnectivity(){return this.viewModel.showArrowsConnectivity}set showArrowsConnectivity(t){this.viewModel.showArrowsConnectivity=t}get showArrowsStructuralAttachment(){return this.viewModel.showArrowsStructuralAttachment}set showArrowsStructuralAttachment(t){this.viewModel.showArrowsStructuralAttachment=t}get showAssociationsEnabled(){return this.viewModel.showAssociationsEnabled}set showAssociationsEnabled(t){this.viewModel.showAssociationsEnabled=t}get structuralAttachmentAssociationsLineSymbol(){return this.viewModel.structuralAttachmentAssociationsLineSymbol}set structuralAttachmentAssociationsLineSymbol(t){this.viewModel.structuralAttachmentAssociationsLineSymbol=t}get utilityNetwork(){return this.viewModel.utilityNetwork}set utilityNetwork(t){this.viewModel.utilityNetwork=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{label:t}=this;return e("div",{class:h.widgetContainer},e("calcite-block",{class:h.blockContent,collapsible:!0,heading:t},this._renderStatusIcon(),this.autoRefreshAssociations?this._renderShowAssociationsSwitch():this._renderRefreshAssociationsAction(),this._renderContent()))}loadDependencies(){return D({action:()=>A(()=>import("./calcite-action-DegZGoaK.js"),__vite__mapDeps([8,1,2]),import.meta.url),block:()=>A(()=>import("./index-Dv-JqQDv.js").then(t=>t.vG),__vite__mapDeps([1,2]),import.meta.url),"block-section":()=>A(()=>import("./calcite-block-section-BSdUQQWh.js"),__vite__mapDeps([9,1,2]),import.meta.url),icon:()=>A(()=>import("./calcite-icon-D3-fBgCQ.js"),__vite__mapDeps([10,1,2]),import.meta.url),label:()=>A(()=>import("./calcite-label-BkItGIEA.js"),__vite__mapDeps([6,1,2]),import.meta.url),notice:()=>A(()=>import("./index-Dv-JqQDv.js").then(t=>t.vD),__vite__mapDeps([1,2]),import.meta.url),panel:()=>A(()=>import("./calcite-panel-Bw3jBXML.js"),__vite__mapDeps([11,1,2]),import.meta.url),slider:()=>A(()=>import("./calcite-slider-BWw0aoCf.js"),__vite__mapDeps([12,1,2]),import.meta.url),switch:()=>A(()=>import("./calcite-switch-B28276bg.js"),__vite__mapDeps([7,1,2]),import.meta.url),tooltip:()=>A(()=>import("./index-Dv-JqQDv.js").then(t=>t.vE),__vite__mapDeps([1,2]),import.meta.url)})}_connectivityAssociationsSwitchChange(t){this.includeConnectivityAssociations=t.target.checked}_getLoadErrorMessagesAsNotices(t,i){return e("calcite-notice",{closable:!1,key:`error-notice-${i}`,kind:"warning",open:!0,scale:"s"},e("div",{slot:"message"},t))}_maxAllowableAssociationsSliderChange(t){this.maxAllowableAssociations=Number(t.target.value)}_refreshAssociations(){const{viewModel:t,viewModel:{state:i}}=this;i!=="ready"&&i!=="warning"||t.showAssociations()}_renderConnectivityAssociationsSettings(){const{messages:{input:{enableConnectivity:t}},visibleElements:{connectivityAssociationsSettings:i}}=this;if(i)return e("calcite-block-section",{class:h.blockSectionSettings,text:t},e(R,{id:`${this.id}-symbol-picker-connectivity`,lineSymbol:this.connectivityAssociationsLineSymbol,showArrows:this.showArrowsConnectivity,visibleElements:i}))}_renderConnectivityAssociationsToggle(){const{messages:{input:{enableConnectivity:t}}}=this;return e("div",{class:h.labelAndToggle,key:"connectivityAssociationsToggleDiv"},e("calcite-label",{class:h.label},t),e("calcite-switch",{bind:this,checked:this.includeConnectivityAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._connectivityAssociationsSwitchChange}))}_renderContent(){const{viewModel:{loadErrors:t,state:i}}=this;return i==="disabled"?e("div",{class:h.divControlsMain,key:"loadErrorsDiv"},t.items.map(this._getLoadErrorMessagesAsNotices)):e("calcite-panel",{disabled:i==="loading"},e("div",{class:h.divControlsMain},this._renderConnectivityAssociationsToggle(),this._renderStructuralAttachmentAssociationsToggle(),this._renderSettingsPane()))}_renderLoadingAction(t,i,n){return e("div",{key:t,slot:"control"},e("calcite-action",{id:i,loading:!0,text:n}),e("calcite-tooltip",{referenceElement:i},e("span",null,n)))}_renderMaxAllowableAssociationsSlider(){const{messages:{input:{maxAllowableAssociations:t}},visibleElements:{maxAllowableAssociationsSlider:i}}=this;if(i)return e("div",{class:h.labelAndSlider},e("calcite-label",{class:h.label},t),e("calcite-slider",{bind:this,class:h.slider,labelTicks:!0,max:this.maxAllowableAssociationsSliderMax,min:this.maxAllowableAssociationsSliderMin,scale:"s",snap:!0,step:this.maxAllowableAssociationsSliderStep,ticks:this.maxAllowableAssociationsSliderStep,value:this.maxAllowableAssociations,onCalciteSliderChange:this._maxAllowableAssociationsSliderChange}))}_renderRefreshAssociationsAction(){const{messages:{input:{refreshAssociations:t}},messagesCommon:{loading:i},viewModel:{state:n}}=this,r=`${this.id}-refresh-action`;if(n!=="disabled")return e("div",{class:h.actionRefresh,slot:"control"},e("calcite-action",{bind:this,class:h.action,icon:"refresh-f",id:r,loading:n==="loading",onclick:this._refreshAssociations,text:t}),e("calcite-tooltip",{referenceElement:r},e("span",null,n==="loading"?i:t)))}_renderSettingsPane(){const{messagesCommon:{settings:t},visibleElements:{maxAllowableAssociationsSlider:i,connectivityAssociationsSettings:n,structuralAttachmentAssociationsSettings:r}}=this;if(i||n||r)return e("calcite-block",{class:h.blockContent,collapsible:!0,heading:t},this._renderMaxAllowableAssociationsSlider(),this._renderConnectivityAssociationsSettings(),this._renderStructuralAttachmentAssociationsSettings())}_renderShowAssociationsSwitch(){const{messages:{input:{enableAssociations:t}},messagesCommon:{loading:i},viewModel:{state:n}}=this,r=`${this.id}-show-associations-switch`;if(n!=="disabled")return n==="loading"?this._renderLoadingAction("loadingActionDiv",`${this.id}-loading-action`,i):e("div",{class:h.switchContainer,key:"switchDiv",slot:"control"},e("calcite-switch",{bind:this,checked:this.showAssociationsEnabled,class:h.switch,id:r,onCalciteSwitchChange:this._showAssociationsSwitchChange}),e("calcite-tooltip",{referenceElement:r},e("span",null,t)))}_renderStatusIcon(){const{messagesCommon:{executing:t},viewModel:{executionError:i,state:n}}=this;switch(n){case"disabled":return this._renderWarningIcon("statusDiv",`${this.id}-disabled-icon`,null);case"warning":return this._renderWarningIcon("statusDiv",`${this.id}-warning-icon`,i);case"executing":return this._renderLoadingAction("executingActionDiv",`${this.id}-executing-action`,t);default:return}}_renderStructuralAttachmentAssociationsSettings(){const{messages:{input:{enableStructuralAttachment:t}},visibleElements:{structuralAttachmentAssociationsSettings:i}}=this;if(i)return e("calcite-block-section",{class:h.blockSectionSettings,text:t},e(R,{id:`${this.id}-symbol-picker-structural-attachment`,lineSymbol:this.structuralAttachmentAssociationsLineSymbol,showArrows:this.showArrowsStructuralAttachment,visibleElements:i}))}_renderStructuralAttachmentAssociationsToggle(){const{messages:{input:{enableStructuralAttachment:t}}}=this;return e("div",{class:h.labelAndToggle,key:"structuralAttachmentAssociationsToggleDiv"},e("calcite-label",{class:h.label},t),e("calcite-switch",{bind:this,checked:this.includeStructuralAttachmentAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._structuralAttAssociationsSwitchChange}))}_showAssociationsSwitchChange(t){const{viewModel:i}=this;this.showAssociationsEnabled=t.target.checked,this._associationsOptionsEnabled=t.target.checked,this.showAssociationsEnabled||i.removeAssociations()}_structuralAttAssociationsSwitchChange(t){this.includeStructuralAttachmentAssociations=t.target.checked}_renderWarningIcon(t,i,n){return n?e("div",{class:h.statusIconContainer,key:t,slot:"control"},e("calcite-icon",{class:h.statusIconWarning,icon:"exclamation-mark-triangle",id:i,scale:"s"}),e("calcite-tooltip",{referenceElement:i},e("span",null,n))):e("div",{class:h.statusIconContainer,key:t,slot:"control"},e("calcite-icon",{class:h.statusIconWarning,icon:"exclamation-mark-triangle",id:i,scale:"s"}))}};s([o()],c.prototype,"autoRefreshAssociations",null),s([o()],c.prototype,"connectivityAssociationsLineSymbol",null),s([o()],c.prototype,"icon",null),s([o()],c.prototype,"includeConnectivityAssociations",null),s([o()],c.prototype,"includeStructuralAttachmentAssociations",null),s([o()],c.prototype,"label",null),s([o()],c.prototype,"maxAllowableAssociations",null),s([o()],c.prototype,"maxAllowableAssociationsSliderMax",null),s([o()],c.prototype,"maxAllowableAssociationsSliderMin",null),s([o()],c.prototype,"maxAllowableAssociationsSliderStep",null),s([o(),f("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],c.prototype,"messages",void 0),s([o(),f("esri/t9n/common")],c.prototype,"messagesCommon",void 0),s([o()],c.prototype,"showArrowsConnectivity",null),s([o()],c.prototype,"showArrowsStructuralAttachment",null),s([o()],c.prototype,"showAssociationsEnabled",null),s([o()],c.prototype,"structuralAttachmentAssociationsLineSymbol",null),s([o()],c.prototype,"utilityNetwork",null),s([o()],c.prototype,"view",null),s([o({type:V})],c.prototype,"viewModel",void 0),s([o({type:O,nonNullable:!0})],c.prototype,"visibleElements",void 0),c=s([L("esri.widgets.UtilityNetworkAssociations")],c);const Z=c;export{Z as default};
